<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timestamp Keys - CleverKeys Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'ck-purple': '#9b59b6',
                        'ck-purple-dark': '#6b21a8',
                        'ck-purple-light': '#c39bd3',
                        'ck-dark': '#0f0f1a',
                        'ck-surface': '#1a1a2e',
                        'ck-card': '#242438',
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-text {
            background: linear-gradient(135deg, #9b59b6 0%, #c39bd3 50%, #9b59b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-ck-dark text-gray-100 min-h-screen">
    <!-- Nav -->
    <nav class="sticky top-0 bg-ck-dark/95 backdrop-blur border-b border-gray-800 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="../" class="flex items-center gap-3">
                <img src="https://raw.githubusercontent.com/tribixbite/CleverKeys/main/res/mipmap-xxxhdpi/ic_launcher.png" alt="CleverKeys" class="w-8 h-8 rounded-lg">
                <span class="font-bold">CleverKeys</span>
            </a>
            <div class="flex gap-4">
                <a href="./" class="text-gray-400 hover:text-white transition-colors">All Specs</a>
                <a href="../" class="text-gray-400 hover:text-white transition-colors">Home</a>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="container mx-auto px-6 py-4 pt-20">
        <div class="flex items-center gap-2 text-sm text-gray-500">
            <a href="../" class="hover:text-ck-purple">Home</a>
            <span>/</span>
            <a href="./" class="hover:text-ck-purple">Specs</a>
            <span>/</span>
            <span class="text-gray-300">Timestamp Keys</span>
        </div>
    </div>

    <!-- Header -->
    <header class="container mx-auto px-6 pb-8">
        <div class="flex items-center gap-3 mb-4">
            <span class="px-3 py-1 text-sm rounded-full" style="background: #e74c3c20; color: #e74c3c">Customization</span>
            <span class="px-3 py-1 text-sm rounded-full bg-ck-card text-gray-400">v1.2.9</span>
        </div>
        <h1 class="text-4xl font-bold gradient-text mb-2">Timestamp Keys</h1>
        <p class="text-xl text-gray-400">Insert formatted date/time with custom patterns</p>
    </header>

    <!-- Content -->
    <main class="container mx-auto px-6 pb-20">
        <div class="bg-ck-surface rounded-2xl p-8 max-w-4xl">
            <h1 class="text-3xl font-bold mb-6 gradient-text">Timestamp Keys</h1>

<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Overview</h2>

<p class="mb-4 text-gray-300">Timestamp keys insert the current date and/or time formatted according to a user-specified pattern when pressed. This allows users to quickly insert dates, times, or combined datetime strings without typing them manually.</p>

<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Key Files</h2>

<table class="w-full mb-4 border-collapse"><thead class="border-b border-gray-700"><tr><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">File</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Class/Function</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Purpose</th></tr></thead><tbody><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">src/main/kotlin/tribixbite/cleverkeys/KeyValue.kt:126</code></td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">Kind.Timestamp</code></td><td class="px-4 py-2 text-gray-300">Enum value for timestamp keys</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">src/main/kotlin/tribixbite/cleverkeys/KeyValue.kt:162-173</code></td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">TimestampFormat</code></td><td class="px-4 py-2 text-gray-300">Data class holding pattern and symbol</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">src/main/kotlin/tribixbite/cleverkeys/KeyValue.kt:460-466</code></td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">makeTimestampKey()</code></td><td class="px-4 py-2 text-gray-300">Factory method to create keys</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">src/main/kotlin/tribixbite/cleverkeys/KeyValueParser.kt:121-127</code></td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">parseTimestampKeydef()</code></td><td class="px-4 py-2 text-gray-300">Parser for short syntax</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">src/main/kotlin/tribixbite/cleverkeys/KeyEventHandler.kt:377-401</code></td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">handleTimestampKey()</code></td><td class="px-4 py-2 text-gray-300">Formats and inserts time</td></tr></tbody></table>
<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Architecture</h2>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-text">Key Press (timestamp key)
       |
       v
+----------------------+
| KeyEventHandler      | -- Receives timestamp KeyValue
| handleKeyPress()     |
+----------------------+
       |
       v
+----------------------+
| handleTimestampKey() | -- Extract pattern from KeyValue.timestampFormat
+----------------------+
       |
       v
+----------------------+
| DateTimeFormatter    | -- Format current time with pattern
| or SimpleDateFormat  |
+----------------------+
       |
       v
+----------------------+
| InputConnection      | -- Commit formatted text
| commitText()         |
+----------------------+</code></pre>

<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Syntax</h2>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Short Syntax</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-text">symbol:timestamp:'pattern'</code></pre>

<p class="mb-4 text-gray-300">Example: <code class="bg-ck-dark px-1 rounded">üìÖ:timestamp:'yyyy-MM-dd'</code> displays "üìÖ" and inserts "2026-01-15"</p>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Long Syntax (Legacy)</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-text">:timestamp symbol='symbol':'pattern'</code></pre>

<p class="mb-4 text-gray-300">Example: <code class="bg-ck-dark px-1 rounded">:timestamp symbol='üìÖ':'yyyy-MM-dd HH:mm'</code></p>

<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Pattern Format</h2>

<p class="mb-4 text-gray-300">Uses Java DateTimeFormatter patterns:</p>

<table class="w-full mb-4 border-collapse"><thead class="border-b border-gray-700"><tr><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Pattern</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Description</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Example</th></tr></thead><tbody><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">yyyy</code></td><td class="px-4 py-2 text-gray-300">4-digit year</td><td class="px-4 py-2 text-gray-300">2026</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">yy</code></td><td class="px-4 py-2 text-gray-300">2-digit year</td><td class="px-4 py-2 text-gray-300">26</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">MM</code></td><td class="px-4 py-2 text-gray-300">Month (01-12)</td><td class="px-4 py-2 text-gray-300">01</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">MMM</code></td><td class="px-4 py-2 text-gray-300">Month abbrev</td><td class="px-4 py-2 text-gray-300">Jan</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">dd</code></td><td class="px-4 py-2 text-gray-300">Day (01-31)</td><td class="px-4 py-2 text-gray-300">15</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">HH</code></td><td class="px-4 py-2 text-gray-300">Hour 24h (00-23)</td><td class="px-4 py-2 text-gray-300">14</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">hh</code></td><td class="px-4 py-2 text-gray-300">Hour 12h (01-12)</td><td class="px-4 py-2 text-gray-300">02</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">mm</code></td><td class="px-4 py-2 text-gray-300">Minute (00-59)</td><td class="px-4 py-2 text-gray-300">30</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">ss</code></td><td class="px-4 py-2 text-gray-300">Second (00-59)</td><td class="px-4 py-2 text-gray-300">45</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">a</code></td><td class="px-4 py-2 text-gray-300">AM/PM</td><td class="px-4 py-2 text-gray-300">PM</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">E</code></td><td class="px-4 py-2 text-gray-300">Day of week</td><td class="px-4 py-2 text-gray-300">Wed</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">EEEE</code></td><td class="px-4 py-2 text-gray-300">Full day name</td><td class="px-4 py-2 text-gray-300">Wednesday</td></tr></tbody></table>
<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Pre-defined Timestamp Keys</h2>

<p class="mb-4 text-gray-300">Available without specifying patterns:</p>

<table class="w-full mb-4 border-collapse"><thead class="border-b border-gray-700"><tr><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Key Name</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Symbol</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Pattern</th><th class="px-4 py-2 text-left font-semibold text-ck-purple-light">Output Example</th></tr></thead><tbody><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_date</code></td><td class="px-4 py-2 text-gray-300">üìÖ</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">yyyy-MM-dd</code></td><td class="px-4 py-2 text-gray-300">2026-01-15</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_time</code></td><td class="px-4 py-2 text-gray-300">üïê</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">HH:mm</code></td><td class="px-4 py-2 text-gray-300">14:30</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_datetime</code></td><td class="px-4 py-2 text-gray-300">üìÜ</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">yyyy-MM-dd HH:mm</code></td><td class="px-4 py-2 text-gray-300">2026-01-15 14:30</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_time_seconds</code></td><td class="px-4 py-2 text-gray-300">‚è±</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">HH:mm:ss</code></td><td class="px-4 py-2 text-gray-300">14:30:45</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_date_short</code></td><td class="px-4 py-2 text-gray-300">üìÖ</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">MM/dd/yy</code></td><td class="px-4 py-2 text-gray-300">01/15/26</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_date_long</code></td><td class="px-4 py-2 text-gray-300">üóì</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">EEEE, MMMM d, yyyy</code></td><td class="px-4 py-2 text-gray-300">Wednesday, January 15, 2026</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_time_12h</code></td><td class="px-4 py-2 text-gray-300">üïê</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">h:mm a</code></td><td class="px-4 py-2 text-gray-300">2:30 PM</td></tr><tr class="border-b border-gray-800"><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">timestamp_iso</code></td><td class="px-4 py-2 text-gray-300">üìã</td><td class="px-4 py-2 text-gray-300"><code class="bg-ck-dark px-1 rounded">yyyy-MM-dd'T'HH:mm:ss</code></td><td class="px-4 py-2 text-gray-300">2026-01-15T14:30:45</td></tr></tbody></table>
<h2 class="text-2xl font-bold mt-8 mb-4 text-ck-purple">Implementation Details</h2>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Data Class</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-kotlin">data class TimestampFormat(
    val pattern: String,
    val symbol: String
)</code></pre>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Factory Method</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-kotlin">fun makeTimestampKey(pattern: String, symbol: String): KeyValue {
    return KeyValue(
        kind = Kind.Timestamp,
        char = '\u0000',
        timestampFormat = TimestampFormat(pattern, symbol)
    )
}</code></pre>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Handler Implementation</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-kotlin">private fun handleTimestampKey(key: KeyValue) {
    val format = key.timestampFormat ?: return
    val formattedTime = try {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {
            // API 26+: Use java.time
            val formatter = DateTimeFormatter.ofPattern(format.pattern)
            LocalDateTime.now().format(formatter)
        } else {
            // API &lt; 26: Use SimpleDateFormat
            val formatter = SimpleDateFormat(format.pattern, Locale.getDefault())
            formatter.format(Date())
        }
    } catch (e: Exception) {
        Log.w(TAG, "Invalid timestamp format: ${format.pattern}")
        format.pattern  // Fallback: insert pattern itself
    }
    inputConnection.commitText(formattedTime, 1)
}</code></pre>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Parser Implementation</h3>

<pre class="bg-ck-dark p-4 rounded-lg overflow-x-auto"><code class="language-kotlin">fun parseTimestampKeydef(keydef: String): KeyValue? {
    // Short syntax: symbol:timestamp:'pattern'
    val shortMatch = """(.+):timestamp:'(.+)'""".toRegex().matchEntire(keydef)
    if (shortMatch != null) {
        val (symbol, pattern) = shortMatch.destructured
        return makeTimestampKey(pattern, symbol)
    }
    return null
}</code></pre>

<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">API Compatibility</h3>

<ul class="mb-4 space-y-1"><li class="ml-4">&#8226; <strong>API 26+ (Android 8.0+)</strong>: Uses <code class="bg-ck-dark px-1 rounded">java.time.LocalDateTime</code> and <code class="bg-ck-dark px-1 rounded">DateTimeFormatter</code></li>
<li class="ml-4">&#8226; <strong>API < 26</strong>: Falls back to <code class="bg-ck-dark px-1 rounded">java.text.SimpleDateFormat</code> with <code class="bg-ck-dark px-1 rounded">java.util.Date</code></li>
</ul>
<h3 class="text-xl font-semibold mt-6 mb-3 text-ck-purple-light">Error Handling</h3>

<p class="mb-4 text-gray-300">If the pattern is invalid:</p>
<ul class="mb-4 space-y-1"><li class="ml-4">1. Logs warning: <code class="bg-ck-dark px-1 rounded">"Invalid timestamp format: [pattern]"</code></li>
<li class="ml-4">2. Falls back to inserting the pattern string itself</li>
</ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="container mx-auto px-6 py-8 text-center text-gray-500 text-sm border-t border-gray-800">
        <p>CleverKeys Documentation - Generated from specs</p>
    </footer>
</body>
</html>